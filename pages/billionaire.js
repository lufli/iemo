import Head from 'next/head';
import axios from 'axios';
import React from 'react';
import useSwr from 'swr';
import ResultRender from '@/components/billionaire/ResultRender';

export default function Billionaire() {
  const { data, mutate } = useSwr('/api/get-lottery-results', axios.get, {
    revalidateIfStale: false,
    revalidateOnFocus: false,
    revalidateOnReconnect: false,
  });

  return (
    <>
      <Head>
        <title>Billionaire</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <h1>Billionaire</h1>
      <button onClick={mutate} type="button">re-run</button>
      { data?.data && data.data.map((result) => (
        <ResultRender {...result} key={result.type} />
      )) }
    </>
  );
}
